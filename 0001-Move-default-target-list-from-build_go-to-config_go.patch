From e6d1f530fb5dfb351aadbb0aa2f6258cd0ebcce8 Mon Sep 17 00:00:00 2001
From: Eric Paris <eparis@redhat.com>
Date: Fri, 5 Sep 2014 13:13:53 -0400
Subject: [PATCH 1/6] Move default target list from build_go to config_go

---
 hack/build-go.sh  |  9 +--------
 hack/config-go.sh | 12 ++++++++++++
 2 files changed, 13 insertions(+), 8 deletions(-)

diff --git a/hack/build-go.sh b/hack/build-go.sh
index 7256042..a011ed8 100755
--- a/hack/build-go.sh
+++ b/hack/build-go.sh
@@ -48,14 +48,7 @@ for arg; do
 done
 
 if [[ ${#targets[@]} -eq 0 ]]; then
-  targets=(
-    cmd/proxy
-    cmd/apiserver
-    cmd/controller-manager
-    cmd/kubelet
-    cmd/kubecfg
-    plugin/cmd/scheduler
-  )
+  targets=($(kube::default_build_targets))
 fi
 
 binaries=()
diff --git a/hack/config-go.sh b/hack/config-go.sh
index e37c91b..386ddc9 100644
--- a/hack/config-go.sh
+++ b/hack/config-go.sh
@@ -114,6 +114,18 @@ kube::setup_go_environment() {
 }
 
 
+# kube::default_build_targets return list of all build targets
+kube::default_build_targets() {
+  targets=(
+    cmd/proxy
+    cmd/apiserver
+    cmd/controller-manager
+    cmd/kubelet
+    cmd/kubecfg
+    plugin/cmd/scheduler
+  )
+  echo "${targets[@]}"
+}
 # --- Environment Variables ---
 
 # KUBE_REPO_ROOT  - Path to the top of the build tree.
-- 
1.9.3

